
@model Helperland.ViewModel.MySettingViewModel
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@{
    ViewData["Title"] = "Helperland | My Settings";
    Layout = "~/Views/Shared/CustomerPageLayout.cshtml";
}

<section class="welcome">
    <div class="text-center d-flex justify-content-center align-items-center">
        <div class="welcome_text">
            Welcome,
        </div>
        <div class="sp_name">
            @HttpContextAccessor.HttpContext.Session.GetString("UserName")
        </div>
        <div class="sp_name">
            !
        </div>
    </div>
</section>



<section class="sp_menu_details">
    <div class="sp_main mx-auto">
        <div class="sp_menu ">
            <ul class="nav flex-column nav-pills">
                <li id="Dashboard-li" class="nav-item" data-bs-toggle="pill" data-bs-target="#v-pills-dashboard"><a href="#" class="nav-link">Dashboard</a></li>
                <li id="ServiceHistory-li" class="nav-item " data-bs-toggle="pill" data-bs-target="#v-pills-sh"><a href="#" class="nav-link">Service History</a></li>
                <li id="FavouritePro-li" class="nav-item" data-bs-toggle="pill" data-bs-target="#v-pills-fp"><a href="#" class="nav-link">Favourite Pros</a></li>

            </ul>
        </div>
        <div class="sp_detail sp_menu_nav_content tab-content">

            <!-- --------------------------------------Dashboard Content --------------------------------------------------- -->
            <div class="tab-pane fade" id="v-pills-dashboard" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                <div class="row mt-2">
                    <div class="col-md-5 sh_title">
                        Current Service Request
                    </div>
                    <div class="col-md-4">

                    </div>
                    <form asp-action="book_service_call" asp-controller="Home" class="col-md-3" id="export_end">
                        <button  type="submit" class="sh_new_req_btn">Add New Request</button>
                    </form>
                </div>
                <table id="dataTable">
                    <thead id="datatable_thead">
                        <tr>
                            <th>
                                <p>Service Id</p>
                            </th>
                            <th>
                                <p>Service Date</p>
                            </th>
                            <th>
                                <p>Service Provider</p>
                            </th>
                            <th class="text-center">
                                <p>Payment</p>
                            </th>
                            <th class="text-center">
                                <p>Action</p>
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        @{
                            if (Model.futureRequests != null)
                            {
                                foreach (var ser in Model.futureRequests)
                                {
                                    int duration_hr = 0;
                                    int duration_min = 0;
                                    DateTime end_time = ser.service_date;
                                    double duration = Convert.ToDouble(ser.duration);
                                    string dura_str = duration.ToString();
                                    bool dura_is_decimal = dura_str.Contains(".");
                                    string[] dura_arr = dura_str.Split(".");
                                    if (dura_is_decimal)
                                    {
                                        duration_hr = Int32.Parse(dura_arr[0]);



                                        if (Int32.Parse(dura_arr[1]) != 0)
                                        {
                                            duration_min = 30;
                                        }
                                        else
                                        {
                                            duration_min = 0;
                                        }
                                    }
                                    else
                                    {
                                        duration_hr = Int32.Parse(dura_str);
                                        duration_min = 0;

                                    }


                                    TimeSpan end_time_cal = new TimeSpan(duration_hr,duration_min,0);

                                    end_time = end_time + end_time_cal;


                                    string end_str = end_time.ToString();
                                    string end = end_str.Substring(10,6);

                                    string date_str = ser.service_date.ToString();
                                    string date = date_str.Substring(0, 10);
                                    string start = date_str.Substring(10, 6);

                                    int extra_ser = ser.extra_service;
                                    string extra_str = extra_ser.ToString();
                                    char[] extra_arr = new char[5];
                                    int extra_total = 5;
                                    int temp = 0;
                                    for(int i=0;i<(extra_total-extra_str.Length);i++)
                                    {
                                        extra_arr[i] = '0';
                                        temp += 1;
                                    }
                                    for(int i=temp,j=0;i<5;i++,j++)
                                    {
                                        extra_arr[i] = extra_str[j];
                                    }
                                    string[] extra_services = { "Inside Cabinets","Inside fridge","Inside Oven","Laundry wash & dry","Interior windows"};
                                    double rating = Convert.ToDouble(ser.sp_rating);
                                    int rate_int = Convert.ToInt32(rating);
                                    <tr class="sp_details pt-3" data-bs-target="@("#servicedetailModal"+ser.service_id)" data-bs-toggle="modal">
                                        <td class="col-md-2">
                                            <p class="text-center">@ser.service_id</p>
                                        </td>

                                        <td class="col-md-2" >
                                            <div class=""  >
                                                <p>
                                                    <img src="/asset/calendar2.png"> <b>@date</b><br>
                                                    <img src="/asset/layer-14.png">@start - @end
                                                </p>
                                            </div>
                                        </td>

                                        <td class="col-md-3">
                                            @if(ser.sp_name != null)
                                            { 
                                            <div class="row">
                                                <div class="col-sm-3 sh_cap_border ">
                                                    <img src="/asset/cap.png" id="cap">
                                                </div>
                                                <div class="col-sm-9 ">
                                                    <p>
                                                        @ser.sp_name<br>
                                                        @for (int i = 0; i < rate_int; i++)
                                                        {
                                                            <img src="/asset/star1.png">
                                                        }
                                                        @for (int i = rate_int; i < 5; i++)
                                                        {
                                                            <img src="/asset/star2.png">
                                                        }
                                                        @rating
                                                    </p>
                                                </div>
                                            </div>
                                            }
                                            
                                        </td>

                                        <td class="col-md-2 sh_payment">
                                            € @ser.service_amount
                                        </td>

                                        <td class="col-md-3">
                                            <div class="d-flex dash_btns justify-content-center align-items-start">
                                                <button data-bs-target="@("#servicedetailModal"+ser.service_id)" data-bs-toggle="modal" class="sr_reschedule_btn">Reschedule</button>
                                                <button class="sr_cancel_btn" data-bs-target="@("#cancelserviceModal"+ser.service_id)" data-bs-toggle="modal">Cancel</button>
                                            </div>
                                        </td>
                                    </tr>


                                    <!-- ------------------------------ service detail modal ------------------------------------------------- -->
                                    <div class="modal fade servicedetail_modal" id="@("servicedetailModal"+ser.service_id)" aria-labelledby="servicedetailModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered justify-content-center">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="servicedetailModalLabel">Service Details</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <pre class="scheduled_time">@date   @start-@end</pre>
                                                    </div>
                                                    <div class="row">
                                                        <pre class="duration"><label>Duration : </label>@duration hrs</pre>
                                                    </div>
                                                    <div class="row pt-2">
                                                        <hr class="seperator">
                                                    </div>
                                                    <div class="row">
                                                        <pre class="service_id"><label>Service ID : </label>@ser.service_id</pre>
                                                    </div>
                                                    <div class="row">
                                                        <div class="d-flex">
                                                            <label>Extras : </label>
                                                            <pre class="service_extra">
                                                            @for(int i =0;i< 5;i++)
                                                            {
                                                                if(extra_arr[i] == '1')
                                                                { 
                                                                     @extra_services[i]  

                                                                }
                                                            }
                                                            </pre>

                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-3">
                                                            <label>Net Amount :</label>
                                                        </div>
                                                        <div class="col-sm-5 d-flex justify-content-center">
                                                            <pre class="service_amount">@ser.service_amount </pre><pre class="amount_symbol">€</pre>
                                                        </div>
                                                        <div class="col-sm-4">

                                                        </div>
                                                    </div>

                                                    <div class="row pt-2">
                                                        <hr class="seperator">
                                                    </div>

                                                    <div class="row">
                                                        <pre class="service_address"><label>Service Address : </label>@ser.service_address</pre>
                                                    </div>

                                                    <div class="row">
                                                        <pre class="service_phone"><label>Phone : </label>@ser.phone</pre>
                                                    </div>

                                                    <div class="row">
                                                        <pre class="service_email"><label>Email : </label>@ser.email</pre>
                                                    </div>

                                                    <div class="row pt-2">
                                                        <hr class="seperator">
                                                    </div>

                                                    <div class="row">
                                                        <pre class="service_comment"><label>Comments : </label>@ser.comment</pre>
                                                    </div>

                                                    <div class="row">
                                                        @if (ser.has_pet)
                                                        {
                                                            <pre class="service_pets"><label><img src="/asset/has-pet-true.png" />  </label>I have pets at home</pre>
                                                        }
                                                        else
                                                        {
                                                            <pre class="service_pets"><label><img src="/asset/has-pet-false.png" />  </label>I don't have pets at home</pre>

                                                        }

                                                    </div>

                                                    <div class="row pt-2">
                                                        <hr class="seperator">
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-sm-3">
                                                            <button data-bs-toggle="modal" data-bs-target="@("#rescheduleModal"+ser.service_id)" class="service_reschedule_btn" type="button">Reschedule</button>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <button class="cancel_btn" data-bs-target="@("#cancelserviceModal"+ser.service_id)" data-bs-toggle="modal" type="button">Cancel</button>
                                                        </div>

                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- ------------------------------rescehdule service modal -------------------------------------------------- -->
                                    <div class="modal fade reschedule_modal" id="@("rescheduleModal"+ser.service_id)" aria-labelledby="rescheduleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="rescheduleModalLabel">Reschedule Service Request</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form asp-action="reschedule_service" asp-controller="Home">
                                                        <div class="row pt-2">
                                                            <div class="col-sm-7 date-container">
                                                                <input type="text" asp-for="mySettingReschedule.rescheduled_date" id="service_date" class="form-control date_field"  onfocus="(this.type='date')" onblur="(this.type='text')" placeholder="01/01/1111" required>
                                                                <span class="date-button">
                                                                    <img src="/asset/admin-calendar-blue.png">
                                                                </span>
                                                                <span class="text-danger" asp-validation-for="mySettingReschedule.rescheduled_date"></span>
                                                            </div>
                                                            <div class="col-sm-5 clock-container">
                                                                <input id="service_time" asp-for="mySettingReschedule.rescheduled_time" type="time" placeholder="00:00" class="form-control" required>
                                                                <span class="clock-button">
                                                                    <img src="/asset/clock-blue.png">
                                                                </span>
                                                                <span class="text-danger" asp-validation-for="mySettingReschedule.rescheduled_time"></span>
                                                            </div>
                                                            <input asp-for="hidden_service_id" type="hidden" value="@ser.service_id" />
                                                        </div>
                                                        <div class="row pt-2 update-container">
                                                            <button type="submit" class="update_btn">Update</button>
                                                        </div>
                                                    </form>


                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <!-- ------------------------------ cancel service modal ------------------------------------------------- -->
                                    <div class="modal fade cancelservice_modal" id="@("cancelserviceModal"+ser.service_id)" aria-labelledby="cancelserviceModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered justify-content-center">
                                            <div class="modal-content">

                                                <div class="modal-body">
                                                    <div class="modal_register">
                                                        Are you sure to cancel the service?
                                                    </div>
                                                    <form asp-action="cancel_service" asp-controller="Home" class="modal-footer justify-content-center login-btn">
                                                        <input asp-for="hidden_delete_service" value="@ser.service_id" type="hidden" />
                                                        <button type="submit" data-bs-dismiss="modal">Yes</button>
                                                        <button type="button" class="no_btn" data-bs-dismiss="modal">No</button>
                                                    </form>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        }
                    </tbody>
                </table>
            </div>






            <!-- --------------------------------------Service History content --------------------------------------------- -->
            <div id="v-pills-sh" class="tab-pane fade">
                <div class="row mt-2">
                    <div class="col-md-3 sh_title">
                        Service History
                    </div>
                    <div class="col-md-7">

                    </div>
                    <div class="col-md-2" id="export_end">
                        <button id="export" class="sh_export_btn">Export</button>
                    </div>
                </div>
                <table id="shTable" class="display">
                    <thead id="shtable_thead">
                        <tr>
                            <th>
                                <p>ID</p>
                            </th>
                            <th>
                                <p>Service Details</p>
                            </th>
                            <th>
                                <p>Service Provider</p>
                            </th>
                            <th>
                                <p>Payment</p>
                            </th>
                            <th>
                                <p>Status</p>
                            </th>
                            <th>
                                <p>Rate SP</p>
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        @{
                            if (Model.pastServices != null)
                            {
                                foreach (var ser in Model.pastServices)
                                {

                                    int duration_hr = 0;
                                    int duration_min = 0;
                                    DateTime end_time = ser.service_date;
                                    double duration = Convert.ToDouble(ser.duration);
                                    string dura_str = duration.ToString();
                                    bool dura_is_decimal = dura_str.Contains(".");
                                    string[] dura_arr = dura_str.Split(".");
                                    if (dura_is_decimal)
                                    {
                                        duration_hr = Int32.Parse(dura_arr[0]);



                                        if (Int32.Parse(dura_arr[1]) != 0)
                                        {
                                            duration_min = 30;
                                        }
                                        else
                                        {
                                            duration_min = 0;
                                        }
                                    }
                                    else
                                    {
                                        duration_hr = Int32.Parse(dura_str);
                                        duration_min = 0;

                                    }


                                    TimeSpan end_time_cal = new TimeSpan(duration_hr, duration_min, 0);

                                    end_time = end_time + end_time_cal;


                                    string end_str = end_time.ToString();
                                    string end = end_str.Substring(10, 6);

                                    string date_str = ser.service_date.ToString();
                                    string date = date_str.Substring(0, 10);
                                    string start = date_str.Substring(10, 6);
                                    double rating = Convert.ToDouble(ser.sp_rating);
                                    int rate_int = Convert.ToInt32(rating);
                                    <tr class="sp_details pt-3">
                                        <td class="col-md-1 col-sm-9">
                                            <p>@ser.service_id</p>
                                        </td>
                                        <td class="col-md-3">
                                            <div class="">
                                                <p>
                                                    <img src="/asset/calendar.png"> <b>@date</b><br>
                                                    @start - @end 
                                                </p>
                                            </div>
                                        </td>
                                        <td class="col-md-3 ">
                                            <div class="row">
                                                <div class="col-sm-3 sh_cap_border ">
                                                    <img src="/asset/cap.png" id="cap">
                                                </div>
                                                <div class="col-sm-9 ">
                                                    <p>
                                                        @ser.sp_name<br>
                                                        @for (int i = 0; i < rate_int; i++)
                                                        {
                                                            <img src="/asset/star1.png">
                                                        }
                                                        @for (int i = rate_int; i < 5; i++)
                                                        {
                                                            <img src="/asset/star2.png">
                                                        }
                                                        @rating
                                                    </p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="col-md-2 sh_payment">
                                            € @ser.service_amount
                                        </td>
                                        <td class="col-md-2 sh_status align-items-center pt-1">
                                            @if (ser.status == 2)
                                            {
                                                <div class="sh_status_completed">
                                                    Completed
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="sh_status_cancelled">
                                                    Cancelled
                                                </div>
                                            }


                                        </td>
                                        <td class="col-md-1">
                                            @if (ser.status == 2)
                                            {
                                                <button data-bs-toggle="modal" data-bs-target="@("#ratespModal"+ser.service_id)" class="sh_ratesp">Rate SP</button>
                                            }

                                        </td>
                                    </tr>

                                    <div class="modal fade ratesp_modal" id="@("ratespModal"+ser.service_id)" aria-labelledby="servicedetailModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered justify-content-center">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <div class="row sp_ratings">
                                                        <div class="col-sm-3 sh_rate_cap_border ">
                                                            <img src="/asset/default-sp-large.png" id="cap">
                                                        </div>
                                                        <div class="col-sm-9 pt-3">
                                                            <p class="">
                                                                @ser.sp_name<br>
                                                                @for (int i = 0; i < rate_int; i++)
                                                                {
                                                                    <img src="/asset/star1.png">
                                                                }
                                                                @for (int i = rate_int; i < 5; i++)
                                                                {
                                                                    <img src="/asset/star2.png">
                                                                }
                                                                @rating
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div  class="modal-body">
                                                    <div class="row">
                                                        <label>Rate your Service Provider</label>
                                                    </div>
                                                    <div class="row pt-2">
                                                        <hr class="seperator">
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-5">
                                                            <label>On Time Arrival</label>
                                                        </div>
                                                        <div class="col-sm-4 d-flex rating_stars">
                                                            <img height="20" width="20" id="@("ota_1"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("ota_2"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("ota_3"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("ota_4"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("ota_5"+ser.service_id)" src="/asset/star2.png">
                                                        </div>
                                                    </div>
                                                    <div class="row pt-2">
                                                        <div class="col-sm-5">
                                                            <label>Friendly</label>
                                                        </div>
                                                        <div class="col-sm-4 d-flex rating_stars">
                                                            <img height="20" width="20" id="@("frnd_1"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("frnd_2"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("frnd_3"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("frnd_4"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("frnd_5"+ser.service_id)" src="/asset/star2.png">
                                                        </div>
                                                    </div>
                                                    <div class="row pt-2">
                                                        <div class="col-sm-5">
                                                            <label>Quality of Service</label>
                                                        </div>
                                                        <div class="col-sm-4 d-flex rating_stars">
                                                            <img height="20" width="20" id="@("qos_1"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("qos_2"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("qos_3"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("qos_4"+ser.service_id)" src="/asset/star2.png">
                                                            <img height="20" width="20" id="@("qos_5"+ser.service_id)" src="/asset/star2.png">
                                                        </div>
                                                    </div>
                                                    <div class="row pt-2">
                                                        <hr class="seperator">
                                                    </div>
                                                    <div class="row">
                                                        <label>Feedback on Service Provider</label>
                                                    </div>
                                                    <form asp-action="sp_rating" asp-controller="Home" class="row">
                                                        <div class="col-sm-12">
                                                            <div class="row">
                                                                <textarea asp-for="feedback" class="form-control sp_rate_textarea"></textarea>
                                                            </div>
                                                            <div class="row">
                                                                <input asp-for="on_time_arrival" type="hidden" id="@("hidden_ota"+ser.service_id)" />
                                                                <input asp-for="freindly" type="hidden" id="@("hidden_frnd"+ser.service_id)" />
                                                                <input asp-for="qualit_of_service" type="hidden" id="@("hidden_qos"+ser.service_id)" />
                                                                <input asp-for="rate_ser_id" value="@ser.service_id" type="hidden" />
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm-3">
                                                                    <button data-bs-dismiss="modal" class="service_reschedule_btn" type="submit">Submit</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                    


                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        }



                    </tbody>
                </table>
            </div>


            <!-- --------------------------------------Favourite Providers content------------------------------------------------- -->
            <div class="tab-pane fade" id="v-pills-fp" role="tabpanel" aria-labelledby="v-pills-fp-tab">
                Favourite Pros
            </div>


            <!-- --------------------------------------My Settings content ------------------------------------------------------- -->
            <div class="tab-pane fade show active" id="v-pills-mySetting" role="tabpanel" area-labelledby="v-pills-mySetting-tab">
                <!-- Pills navs -->
                <ul class="row mySetting_header nav nav-pills">
                    <li id="ms_head_1" class="nav-item col-lg-3 active" data-bs-toggle="pill" data-bs-target="#myDetails"><a href="#" class="nav-link">My Details</a></li>
                    <li id="ms_head_2" class="nav-item col-lg-3" data-bs-toggle="pill" data-bs-target="#myAddresses"><a href="#" class="nav-link">My Addresses</a></li>
                    <li id="ms_head_3" class="nav-item col-lg-3" data-bs-toggle="pill" data-bs-target="#myChangepass"><a href="#" class="nav-link">Change Password</a></li>
                </ul>


                <!-- Pills content -->
                <!-- -----------------------mydetails content---------------- -->
                <form asp-action="mySetting" asp-controller="Home" class="tab-pane fade show active myDetail_form" id="myDetails" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">

                    <div class="row pt-4 personal_info">
                        <div class="col-md-4">
                            <div class="row">
                                <label>First Name</label>
                            </div>
                            <div class="row pt-1">
                                <input asp-for="my.fname" id="ms_fname" class="form-control" type="text" placeholder="Firstname" />
                                <span asp-validation-for="my.fname" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <label>Last Name</label>
                            </div>
                            <div class="row pt-1">
                                <input asp-for="my.lname" id="ms_lname" class="form-control" type="text" placeholder="Lastname" />
                                <span asp-validation-for="my.lname" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <label>Email</label>
                            </div>
                            <div class="row pt-1">
                                <input asp-for="my.email" id="ms_email" class="form-control" type="email" placeholder="E-mail" />
                                <span asp-validation-for="my.email" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row pt-3 phone_num">
                        <div class="col-md-4">
                            <div class="row">
                                <label>Phone Number</label>
                            </div>
                            <div class="row pt-1">
                                <div class="input-group">
                                    <span class="c_code align-items-center justify-content-center">+49</span>
                                    <input asp-for="my.phone" type="text" class="form-control" id="ms_phone" placeholder="Mobile Number" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" pattern="[0-9]{10}" />

                                </div>
                                <span asp-validation-for="my.phone" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-5 DOB_select">
                            <div class="row">
                                <label>Date of Birth</label>
                            </div>
                            <div class="row pt-1">
                                <div class="col-sm-3">
                                    <select asp-for="dob_day" class="form-select" id="DOB_day">
                                        <option value="1" selected>01</option>
                                        <option value="2">02</option>
                                        <option value="3">03</option>
                                        <option value="4">04</option>
                                        <option value="5">05</option>
                                        <option value="6">06</option>
                                        <option value="7">07</option>
                                        <option value="8">08</option>
                                        <option value="9">09</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                    </select>
                                </div>
                                <div class="col-sm-5">
                                    <select asp-for="dob_month" class="form-select" id="DOB_month">
                                        <option value="1" selected>January</option>
                                        <option value="2">February</option>
                                        <option value="3">March</option>
                                        <option value="4">April</option>
                                        <option value="5">May</option>
                                        <option value="6">June</option>
                                        <option value="7">July</option>
                                        <option value="8">August</option>
                                        <option value="9">September</option>
                                        <option value="10">October</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </div>
                                <div class="col-sm-4">
                                    <select asp-for="dob_year" class="form-select" id="DOB_year">
                                        <option value="1960">1960</option>
                                        <option value="1961">1961</option>
                                        <option value="1962">1962</option>
                                        <option value="1963">1963</option>
                                        <option value="1964">1964</option>
                                        <option value="1965">1965</option>
                                        <option value="1966">1966</option>
                                        <option value="1967">1967</option>
                                        <option value="1968">1968</option>
                                        <option value="1969">1969</option>
                                        <option value="1970">1970</option>
                                        <option value="1971">1971</option>
                                        <option value="1972">1972</option>
                                        <option value="1973">1973</option>
                                        <option value="1974">1974</option>
                                        <option value="1975">1975</option>
                                        <option value="1976">1976</option>
                                        <option value="1977">1977</option>
                                        <option value="1978">1978</option>
                                        <option value="1979">1979</option>
                                        <option value="1980">1980</option>
                                        <option value="1981">1981</option>
                                        <option value="1982">1982</option>
                                        <option value="1983">1983</option>
                                        <option value="1984">1984</option>
                                        <option value="1985">1985</option>
                                        <option value="1986">1986</option>
                                        <option value="1987">1987</option>
                                        <option value="1988">1988</option>
                                        <option value="1989">1989</option>
                                        <option value="1990">1990</option>
                                        <option value="1991">1991</option>
                                        <option value="1992">1992</option>
                                        <option value="1993">1993</option>
                                        <option value="1994">1994</option>
                                        <option value="1995">1995</option>
                                        <option value="1996">1996</option>
                                        <option value="1997">1997</option>
                                        <option value="1998">1998</option>
                                        <option value="1999">1999</option>
                                        <option value="2000">2000</option>
                                        <option value="2001">2001</option>
                                        <option value="2002">2002</option>
                                        <option value="2003">2003</option>
                                        <option value="2004">2004</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>



                    <div class="row pt-5">
                        <hr class="seperator">
                    </div>

                    <div class="row pt-2">
                        <div class="row">
                            <label>My Prefered Language</label>
                        </div>
                        <div class="row pt-1 select_lang">
                            <div class="col-sm-2">
                                <select asp-for="user.LanguageId" class="form-select" id="Language">
                                    <option value="1">Hindi</option>
                                    <option value="2" selected>English</option>
                                    <option value="3">Gujarati</option>
                                </select>
                            </div>

                        </div>
                    </div>

                    <div class="row pt-3 save_btn">
                        <div class="col-sm-2">
                            <button type="submit" class="myDetails_save">Save</button>
                        </div>

                    </div>
                </form>

                <!-- ----------------Myaddresses content---------------------------------- -->
                <div class="tab-pane fade" id="myAddresses" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                    <div class="row pt-3 addresses_content">

                        <div class="row addresses_header">
                            <div class="col-sm-3">
                                <label>Addresses</label>
                            </div>
                            <div class="col-sm-2 ms-auto">
                                <label>Actions</label>
                            </div>
                        </div>

                        @{
                            if (Model != null)
                            {
                                foreach (var data in Model.userAddresses)
                                {
                                    var addressline = (data.AddressLine1).ToString();
                                    string[] street = addressline.Split(' ');
                                    var house = street[street.Length - 1];
                                    street = street.Where(val => val != house).ToArray();
                                    string street_str = string.Join(" ", street);



                                    <div class="row address_data">
                                        <div class="col-sm-9 ">
                                            <div class="row pt-2">
                                                <div class="col-sm-12 d-flex">
                                                    <label>Address : </label>
                                                    <pre class="ss_aaddress_street"> @data.AddressLine1 </pre>
                                                    <pre>,</pre>
                                                    <pre class="ss_address_city"> @data.City</pre>
                                                    <pre class="ss_address_pin">  @data.PostalCode</pre>
                                                </div>
                                            </div>
                                            <div class="row ph_row">
                                                <div class="col-sm-12 d-flex">
                                                    <label>Phonenumber : </label>
                                                    <p class="ss_address_phone"> @data.Mobile</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3 ms-auto">
                                            <div class="row interact_address">
                                                <div class="col-sm-2 ms-auto">
                                                    <a href="#" class="edit_img_btn" data-bs-toggle="modal" data-bs-target="@("#add"+data.AddressId)"><img src="/asset/edit-icon.png" /></a>
                                                </div>
                                                <div class="col-sm-6">
                                                    <a href="#" data-bs-toggle="modal" data-bs-target="@("#deleteModal"+data.AddressId)"><img src="/asset/delete-icon.png" /></a>
                                                </div>


                                            </div>
                                        </div>
                                    </div>



                                    <div class="modal fade address_modal" id="@("add"+data.AddressId)" aria-labelledby="addressModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="addressModalLabel">Edit Address</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form asp-action="edit_address" asp-controller="Home">
                                                        <div class="row ">
                                                            <div class="col-md-6 ">
                                                                <div class="row pt-2">
                                                                    <label>Street Name</label>
                                                                </div>
                                                                <div class="row pt-1">
                                                                    <div class="col-sm-12">
                                                                        <input id="@("add_street"+data.AddressId)" asp-for="myAddress.street" type="text" placeholder="Street Name" class="form-control" value="@street_str" />
                                                                        <span class="text-danger" asp-validation-for="myAddress.street"></span>
                                                                    </div>
                                                                </div>

                                                                <div class="row pt-2">
                                                                    <label>Postal Code</label>
                                                                </div>
                                                                <div class="row pt-1">
                                                                    <div class="col-sm-12">
                                                                        <input asp-for="myAddress.pincode" id="@("add_postal"+data.AddressId)" value="@data.PostalCode" type="text" placeholder="Postalcode" class="form-control" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" />
                                                                        <span class="text-danger" asp-validation-for="myAddress.pincode"></span>

                                                                    </div>
                                                                </div>

                                                                <div class="row pt-2">
                                                                    <label>Phone number</label>
                                                                </div>
                                                                <div class="row pt-1">
                                                                    <div class="col-sm-12">
                                                                        <div class="col-sm-12 input-group">
                                                                            <span class="c_code align-items-center justify-content-center">+49</span>
                                                                            <input asp-for="myAddress.phone" type="text" value="@data.Mobile" class="form-control" id="@("add_mobile"+data.AddressId)" placeholder="Mobile Number" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" pattern="[0-9]{10}" />


                                                                        </div>
                                                                        <span class="text-danger" asp-validation-for="myAddress.phone"></span>
                                                                    </div>
                                                                </div>


                                                            </div>


                                                            <div class="col-md-6">
                                                                <div class="row pt-2">
                                                                    <label>House number</label>
                                                                </div>
                                                                <div class="row pt-1">
                                                                    <div class="col-sm-12">
                                                                        <input asp-for="myAddress.hno" id="@("add_house"+data.AddressId)" value="@house" type="text" placeholder="House number" class="form-control" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" />
                                                                        <span class="text-danger" asp-validation-for="myAddress.hno"></span>
                                                                        
                                                                    </div>
                                                                </div>

                                                                <div class="row pt-2">
                                                                    <label>City</label>
                                                                </div>
                                                                <div class="row pt-1">
                                                                    <div class="col-sm-12">
                                                                        <input asp-for="myAddress.city" id="@("add_city"+data.AddressId)" value="@data.City" type="text" placeholder="City" class="form-control" />
                                                                        <span class="text-danger" asp-validation-for="myAddress.city"></span>
                                                                    </div>
                                                                </div>
                                                            </div>



                                                        </div>
                                                        <div class="row pt-3">
                                                            <div class="col-12 mb-2">
                                                                <button type="submit" class="save_address_btn">Save</button>

                                                            </div>
                                                        </div>
                                                        <div>
                                                            <input id="@("hidden_add_id"+data.AddressId)" value="@data.AddressId" type="hidden" asp-for="hidden_add_id" />
                                                        </div>
                                                    </form>
                                                </div>

                                            </div>
                                        </div>
                                    </div>




                                    <div class="modal fade delete_modal" id="@("deleteModal"+data.AddressId)" aria-labelledby="datasaveModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered justify-content-center">
                                            <div class="modal-content">

                                                <div class="modal-body">
                                                    <div class="modal_register">
                                                        Are you sure to Delete this address?
                                                    </div>
                                                </div>
                                                <form asp-action="delete_address" asp-controller="Home" class="modal-footer justify-content-center login-btn">
                                                    <input asp-for="delete_add_id" type="hidden" value="@data.AddressId" />
                                                    <button type="submit" data-bs-dismiss="modal">Yes</button>
                                                    <button type="button" class="no_btn" data-bs-dismiss="modal">No</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                }
                            }
                        }


                        <div class="row pt-3">
                            <div class="col-sm-3">
                                <button type="button" class="myDetails_save" data-bs-toggle="modal" data-bs-target="#newaddressModal">Add New Address</button>
                            </div>
                        </div>

                    </div>
                </div>



                <div class="modal fade new_address_modal" id="newaddressModal" aria-labelledby="addressModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="addressModalLabel">New Address</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <form asp-action="add_new_address" asp-controller="Home">
                                    <div class="row ">
                                        <div class="col-md-6 ">
                                            <div class="row pt-2">
                                                <label>Street Name</label>
                                            </div>
                                            <div class="row pt-1">
                                                <div class="col-sm-12">
                                                    <input asp-for="myAddress.street" type="text" placeholder="Street Name" class="form-control" />
                                                    <span class="text-danger" asp-validation-for="myAddress.street"></span>
                                                </div>
                                            </div>

                                            <div class="row pt-2">
                                                <label>Postal Code</label>
                                            </div>
                                            <div class="row pt-1">
                                                <div class="col-sm-12">
                                                    <input asp-for="myAddress.pincode" type="text" placeholder="Postalcode" class="form-control" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" />
                                                    <span class="text-danger" asp-validation-for="myAddress.pincode"></span>
                                                </div>
                                            </div>

                                            <div class="row pt-2">
                                                <label>Phone number</label>
                                            </div>
                                            <div class="row pt-1">
                                                <div class="col-sm-12">
                                                    <div class="col-sm-12 input-group">
                                                        <span class="c_code align-items-center justify-content-center">+49</span>
                                                        <input asp-for="myAddress.phone" type="text" class="form-control" placeholder="Mobile Number" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" pattern="[0-9]{10}" />

                                                    </div>
                                                    <span class="text-danger" asp-validation-for="myAddress.phone"></span>
                                                </div>
                                            </div>


                                        </div>


                                        <div class="col-md-6">
                                            <div class="row pt-2">
                                                <label>House number</label>
                                            </div>
                                            <div class="row pt-1">
                                                <div class="col-sm-12">
                                                    <input asp-for="myAddress.hno" type="text" placeholder="House number" class="form-control" onkeypress="return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))" />
                                                    <span class="text-danger" asp-validation-for="myAddress.hno"></span>
                                                </div>
                                            </div>

                                            <div class="row pt-2">
                                                <label>City</label>
                                            </div>
                                            <div class="row pt-1">
                                                <div class="col-sm-12">
                                                    <input asp-for="myAddress.city" type="text" placeholder="City" class="form-control" />
                                                    <span class="text-danger" asp-validation-for="myAddress.city"></span>
                                                </div>
                                            </div>
                                        </div>



                                    </div>
                                    <div class="row pt-3">
                                        <div class="col-12 mb-2">
                                            <button type="submit" class="save_address_btn">Save</button>

                                        </div>
                                    </div>

                                </form>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- ----------------------change password content------------------------ -->
                <form asp-action="ChangePass" asp-controller="Home" class="tab-pane fade " id="myChangepass" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
                    <div class="row pt-3 changepass_content">
                        <div class="col-lg-4">
                            <div class="row">
                                <label>Old Password</label>
                            </div>
                            <div class="row pt-1">
                                <input asp-for="pwd" id="old_pass" type="password" class="form-control" placeholder="Old Password" />
                                <span id="wrongPass" class="text-danger">Old password is invalid</span>
                            </div>

                            <div class="row pt-3">
                                <label>New Password</label>
                            </div>
                            <div class="row pt-1">
                                <input asp-for="forgot.fpassword" type="password" id="password"  class="form-control" placeholder="Password" />
                                <span asp-validation-for="forgot.fpassword" class="text-danger"></span>
                            </div>

                            <div class="row pt-3">
                                <label>Confirm Password</label>
                            </div>
                            <div class="row pt-1">
                                <input type="password" asp-for="forgot.confirmPassword" id="confirm_password" class="form-control" placeholder="Confirm Password">
                                <span asp-validation-for="forgot.confirmPassword" class="text-danger"></span>
                                @*<span id='message'></span>*@
                            </div>

                            <div class="row pt-2 save_btn">
                                <div class="col-sm-5">
                                    <button type="submit" class="myDetails_save">Save</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>



            </div>
        </div>


    </div>
</section>




